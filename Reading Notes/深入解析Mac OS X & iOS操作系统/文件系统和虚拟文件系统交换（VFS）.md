---
title: 文件系统和虚拟文件系统交换（VFS）
categories: 
 - Apple Development
 - 深入解析Mac OS X && iOS操作系统笔记
 - 内核
tags:
 - 内核
---

## 硬盘分区
### 主引导记录（Master Boot Record，MBR）
- 只能有4个分区，2的32次方的扇区（一个扇区512字节），并且第一个扇区的前440个字节用来存储启动引导程序，从446开始的16*4个字节用来存储4个分区表的信息，剩下的2个字节则是MBR的签名。

### Apple Partion Map
- 32位方案，突破了4个分区的限制

### GUID分区表（GUID Partion Table，GPT）
- 64位方案

## 软链接与硬链接
- 通常我们看到的文件名只是文件属性的一部分，而实际指向文件的是文件号（node）。
- 硬链接就是指不同的文件名指向同一个文件号，只有所有的文件名删除掉了，该文件才会被删除。（可以类比成iOS的引用计数）。
- 软链接则拥有自己的文件号（node），而node指向的文件数据则跟一般的文件数据不一样，它里面包含了目标文件的文件路径。（可以类比成浅拷贝），因此软链接可以夸文件系统。如果文件删除了，那么软链接指向的数据就是错误的。




