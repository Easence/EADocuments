#读书笔记之Mach调度

标签（空格分隔）： 《OSX&iOS内核》 读书笔记

---

##线程
线程是个结构体
##任务（task）
线程的容器，是以线程为元素的数组
##优先级
##运行队列
将同等优先级的线程放到同一个数组，而运行队列则是优先级数组的数组
##续体
为降低切换线程消耗资源而设计的数据结构，里面包含了线程的状态以及入口，当线程切换时候，调度器找到目标线程的续体，然后从续体恢复状态，进入线程。
##抢占模式
- 显示抢占：线程自己管理自己对资源的占用，即，自己管理自己在什么让出CPU，或者什么时候占用CPU。缺点:
- 隐式抢占：调度器管理线程的执行。
##异步软件陷阱（AST）

##定时器中断
软件定时器：
硬件定时器：
##异常
- 每个task可以注册一个异常处理端口A，如果它的子线程没有注册异常处理端口，那么它的所有线程的的异常都将抛到端口A。
- 异常消息分发顺序：
1、检查线程是否注册了异常处理端口，有则线程数理。完成。
2、检查task时候注册异常处理端口，有则task处理。完成。
3、检查远端server时候有注册异常处理端口，有则远端server处理。完成。
4、如果都没有注册异常处理端口，则crash。






